root
    module "experiment_1" {
        source = "./modules/experiment
        name = "experiment_1"
        templates = ["dhcp","attacker,"targets"]
        extern_networks = [extern_network]
        config 
    }

    module "experiment_2" {
        source = "./modules/experiment"
        name = "experiment_2"
        templates = ["dhcp","attacker,"targets"]
        config
        extern_networks = [extern_network]
    }

experiment
    variables.tf
        var "name" {}
        var "templates" {}
        var "extern_network" {}
        var "config" {}cd 
    experiment.tf
        resource folder
        module "network" {
            source = "./modules/network"
            name = var.name
        }
        module "dhcp_server" {
            source = "./modules/vm"
            template = templates[0]
            networks = [module.network.data.intern_network.id]
            folder
             
        }

        #wait for DHCP

        module "attacker" {
            source = "./modules/vm"
            templates = templates[1]
            folder
            networks = [ module.network.data.intern_network.id,externs_network]

        }
    for target in templates[2,:]
        module "target" {
            source = "./modules/vm"
            templates = templates[target]
            networks = [module.network.data.intern_network.id]
            folder 
        }

network
    variables.tf
        var name "" {}
    network.tf
        resource "switch"
        resource "portgroup"
        data "intern_network"


vm
    variables.tf
        var name "" {}
        var "template" {}
        var "folder" {}
        var "networks" {}
    network.tf
        data "template"
        resource "vm" -> for.each netowrks


